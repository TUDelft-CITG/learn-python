"use strict";(self.webpackChunk_jupyterlite_xeus_python_kernel=self.webpackChunk_jupyterlite_xeus_python_kernel||[]).push([[20],{20:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var i=s(353),n=s(218),r=s(635),a=s(684),o=s(840),d=s(526),l=s(142);class h{constructor(e){this._isDisposed=!1,this._disposed=new o.Signal(this),this._executeDelegate=new d.PromiseDelegate,this._parentHeader=void 0,this._parent=void 0;const{id:t,name:i,sendMessage:n,location:r}=e;this._id=t,this._name=i,this._location=r,this._sendMessage=n,this._worker=new Worker(new URL(s.p+s.u(213),s.b),{type:void 0}),this._worker.onmessage=e=>{this._processWorkerMessage(e.data)},this._remote=(0,a.wrap)(this._worker),this.initFileSystem(e)}async handleMessage(e){this._parent=e,this._parentHeader=e.header,await this._sendMessageToWorker(e)}async _sendMessageToWorker(e){if("input_reply"!==e.header.msg_type&&(this._executeDelegate=new d.PromiseDelegate),await this._remote.processMessage({msg:e,parent:this.parent}),"input_reply"!==e.header.msg_type)return await this._executeDelegate.promise}get parentHeader(){return this._parentHeader}get parent(){return this._parent}get location(){return this._location}_processWorkerMessage(e){var t,s,i,n;e.header&&(e.header.session=null!==(s=null===(t=this._parentHeader)||void 0===t?void 0:t.session)&&void 0!==s?s:"",e.session=null!==(n=null===(i=this._parentHeader)||void 0===i?void 0:i.session)&&void 0!==n?n:"",this._sendMessage(e),"status"===e.header.msg_type&&"idle"===e.content.execution_state&&this._executeDelegate.resolve())}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}dispose(){this.isDisposed||(this._worker.terminate(),this._worker=null,this._remote=null,this._isDisposed=!0,this._disposed.emit(void 0))}get id(){return this._id}get name(){return this._name}async initFileSystem(e){let t,s;if(e.location.includes(":")){const i=e.location.split(":");t=i[0],s=i[1]}else t="",s=e.location;await this._remote.ready(),e.mountDrive&&(await this._remote.mount(t,"/drive",l.PageConfig.getBaseUrl()),await this._remote.cd(s))}}const p=s.p+"e32b5c282072d717887b60da73178fdd35a65dc3caeacba7a026e5a4255cc997.png",c=s.p+"5c9063b436cedf0567480fe487ece0d1479ea9545f310cba93fa184ccbab290d.png",_=[{id:"@jupyterlite/xeus-python-kernel-extension:kernel",autoStart:!0,requires:[r.IKernelSpecs],optional:[i.IServiceWorkerManager,n.IBroadcastChannelWrapper],activate:(e,t,s,i)=>{t.register({spec:{name:"xeus-python",display_name:"Python (XPython)",language:"python",argv:[],resources:{"logo-32x32":p,"logo-64x64":c}},create:async e=>{const t=!(!(null==s?void 0:s.enabled)||!(null==i?void 0:i.enabled));return t?console.info("xeus-python contents will be synced with Jupyter Contents"):console.warn("xeus-python contents will NOT be synced with Jupyter Contents"),new h({...e,mountDrive:t})}})}}]}}]);